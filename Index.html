   <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=360, initial-scale=1.0" />
  <meta name="description" content="LIAM EYES: Discover trending stories, music, and galleries with a vibrant, user-friendly interface.">
  <meta name="keywords" content="news, trends, stories, music, gallery, LIAM EYES">
  <title>LIAM EYES</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Lobster:wght@400&display=swap" rel="stylesheet">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Arial, Impact, sans-serif;
      background: #e3d4f5;
      color: #1f1335;
      width: 100vw;
      min-height: 100vh;
      overflow-x: hidden;
    }
    body {
      width: 100vw;
      min-height: 100vh;
    }
    .sticky-header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: #e3d4f5;
      box-shadow: 0 4px 12px #bda7e622;
    }
    .liamgo-row {
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      width: 100%;
      position: relative;
      min-height: 60px;
      z-index: 2;
    }
    .liam-logo {
      font-family: Impact, Arial Black, Arial, sans-serif;
      font-size: 2.8em;
      font-weight: bold;
      letter-spacing: -2px;
      padding: 0 0 0 9px;
      margin-top: 7px;
      margin-right: 8px;
      text-shadow: 0 1px 4px #fff;
      text-transform: uppercase;
      display: inline-block;
      user-select: none;
    }
    .liam-logo .liam {
      background: linear-gradient(90deg, #0aafff 0%, #00c86b 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
      letter-spacing: 1px;
      display: inline-block;
    }
    .liam-logo .go {
      background: linear-gradient(90deg, #00c86b 0%, #8000ff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
      letter-spacing: 1px;
      display: inline-block;
    }
    .today-date {
      position: absolute;
      right: 8px; top: 5px;
      font-size: 1em;
      color: #222;
      text-shadow: 1px 1px 0 #fff;
      font-family: Arial, sans-serif;
      font-weight: bold;
      user-select: none;
    }
    .home-mainbar {
      width: 100vw;
      position: relative;
      margin-top: 0.4em;
      z-index: 1;
      background: none;
      height: 75px;
    }
    .homebar-bg {
      background: linear-gradient(90deg, #a81fff 0%, #f740e0 100%);
      height: 73px;
      width: 410px;
      border-radius: 0 0 0 0;
      position: absolute;
      left: 0;
      top: 0;
      z-index: 2;
      box-shadow: 0 8px 16px #c9affb5e;
      display: flex;
      align-items: center;
      padding: 0;
      border-bottom: 6px solid #fff;
    }
    .home-btn-icon {
      left: 22px;
      top: 17px;
      font-size: 2.3em;
      color: #fff;
      text-shadow: 0px 2px 12px #5b01a4b0;
      background: linear-gradient(90deg, #0aafff 0%, #00c86b 100%);
      border: none;
      border-radius: 50%;
      box-shadow: 0 2px 10px #0aafff55;
      outline: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 3;
      position: absolute;
      width: 54px;
      height: 54px;
      transition: box-shadow 0.15s;
    }
    .home-btn-icon:hover {
      box-shadow: 0 6px 20px #0aafffaa;
      filter: brightness(1.15);
    }
    .tabs-row {
      display: flex;
      align-items: center;
      position: absolute;
      right: 0;
      top: 0;
      margin-right: 10px;
      margin-top: 8px;
      z-index: 6;
      gap: 0.7em;
    }
    .tab-btn {
      font-size: 1.05em;
      font-weight: bold;
      border-radius: 14px;
      padding: 0.12em 1em;
      border: none;
      margin: 0 2px;
      cursor: pointer;
      box-shadow: 2px 2px 7px #bbb8;
      background: #fff;
      color: #1b53c0;
      transition: background .16s, color .16s;
    }
    .tab-btn.trends {
      color: #222a5a;
      background: linear-gradient(180deg,#56a9fc 10%,#2b1b7b 100%);
      border: none;
      font-size: 1.3em;
      font-family: Impact, Arial Black, Arial, sans-serif;
      font-weight: bold;
      letter-spacing: 1px;
      padding: 0.03em 1.1em;
      box-shadow: none;
      text-shadow: 1px 1px 1px #c4c9e7;
    }
    .tab-btn.gallery {
      color: #db36c7;
      background: linear-gradient(180deg,#ffb3e8 10%,#bb37f2 100%);
      border: none;
      font-size: 1.3em;
      font-family: Impact, Arial Black, Arial, sans-serif;
      font-weight: bold;
      letter-spacing: 1px;
      padding: 0.03em 1.1em;
      box-shadow: none;
      text-shadow: 1px 1px 1px #e9c4e7;
    }
    .menu-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-left: 2px;
      margin-top: 2px;
      cursor: pointer;
      user-select: none;
      position: relative;
      background: none;
      border: none;
      min-width: 40px;
      min-height: 40px;
    }
    .menu-btn .menu-top {
      font-size: 1.02em;
      font-weight: bold;
      color: #5526ac;
      margin-bottom: 2px;
    }
    .menu-btn .menu-bottom {
      font-size: 1.07em;
      color: #1f1694;
      font-weight: bold;
      letter-spacing: 1px;
      margin-top: -2px;
    }
    .menu-btn .triangle {
      width: 0; height: 0;
      border-left: 18px solid transparent;
      border-right: 18px solid transparent;
      border-top: 16px solid #b09ff5;
      margin-top: -1px;
    }
    .custom-popup {
      display: none;
      position: absolute;
      right: 0;
      top: 48px;
      width: 280px;
      max-width: 96vw;
      min-width: 160px;
      background: linear-gradient(120deg, #e3d4f5 88%, #a9a0c7 100%);
      border-top-left-radius: 16px;
      border-bottom-left-radius: 16px;
      box-shadow: -4px 4px 32px #4125b2a0;
      z-index: 9999;
      padding: 0 0 14px 0;
      min-height: 20vh;
      max-height: 75vh;
      overflow-y: auto;
      animation: fadeIn .16s;
    }
    .custom-popup.show { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateX(24px);} to { opacity: 1; transform: none; } }
    .popup-header {
      display: flex;
      align-items: center;
      gap: 0.6em;
      margin: 15px 0 0 18px;
    }
    .popup-logo {
      font-family: Impact, Arial Black, Arial, sans-serif;
      font-size: 1.25em;
      font-weight: bold;
      letter-spacing: -2px;
      background: linear-gradient(90deg, #0aafff 0%, #00c86b 40%, #00c86b 60%, #8000ff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 1px 4px #fff;
      text-transform: capitalize;
      margin-bottom: 0.1em;
      user-select: none;
    }
    .popup-search-row {
      margin: 18px 0 0 0;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      width: 88%;
      margin-left: 18px;
    }
    .popup-search {
      width: 100%;
      max-width: 180px;
      background: #ece7fb;
      border-radius: 9px;
      border: none;
      padding: 0.7em 1em;
      font-size: 1.12em;
      outline: none;
      box-shadow: 0 1px 5px #6c669b36;
      letter-spacing: 1.1px;
      color: #444;
    }
    .popup-list {
      margin: 18px 0 0 18px;
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      gap: 0.3em;
    }
    .popup-title {
      font-family: Impact, Arial Black, Arial, sans-serif;
      font-size: 1em;
      font-weight: bold;
      background: linear-gradient(180deg,#223fe5 10%,#1e0857 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 0.1em;
      margin-top: 0.1em;
      letter-spacing: 1.2px;
    }
    .popup-list-btn {
      display: flex;
      align-items: center;
      gap: 0.55em;
      padding: 0.6em 1em;
      font-family: Impact, Arial Black, Arial, sans-serif;
      font-size: 1.01em;
      color: #fff;
      background: linear-gradient(90deg,#7a62ef 0%,#e822e6 100%);
      border: none;
      border-radius: 11px;
      margin-bottom: 9px;
      cursor: pointer;
      width: 100%;
      transition: background 0.13s, color 0.13s;
      text-align: left;
      box-shadow: 0 2px 9px #b29fe9;
    }
    .popup-list-btn:hover {
      background: linear-gradient(90deg,#e822e6 0%,#7a62ef 100%);
      color: #fff;
    }
    .popup-social-row {
      margin: 12px 0 0 11px;
      display: flex;
      gap: 14px;
    }
    .popup-social-row a {
      color: #222;
      background: #fff;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.98em;
      box-shadow: 0 2px 5px #bbb8;
      border: none;
      text-decoration: none;
      transition: background 0.16s, color 0.16s;
    }
    .popup-social-row a:hover {
      background: #222;
      color: #fff;
    }
    .admin-popup {
      background: #f6e9fd !important;
      border-radius: 18px;
      box-shadow: 0 2px 16px 0 #b621fe33;
      padding: 20px 18px 12px 18px;
      width: 270px;
      position: absolute;
      right: 24px;
      top: 60px;
      z-index: 9998;
      display: none;
    }
    .admin-popup .popup-title {
      color: #8e24aa !important;
      background: none !important;
      -webkit-text-fill-color: initial;
      -webkit-background-clip: initial;
    }
    .admin-popup .popup-list-btn {
      background: linear-gradient(90deg,#b621fe,#1fd1f9) !important;
      color: #fff;
      font-family: Impact, Arial Black, Arial, sans-serif;
      font-weight: bold;
      margin-bottom: 10px;
      box-shadow: 0 2px 9px #b29fe9;
      font-size: 1em;
    }
    .admin-popup .popup-list-btn:hover {
      background: linear-gradient(90deg,#1fd1f9,#b621fe) !important;
      color: #fff;
    }
    .admin-popup .popup-social-row a {
      color: #8e24aa;
      background: #fff;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.13em;
      box-shadow: 0 2px 5px #bbb8;
      border: none;
      text-decoration: none;
      transition: background 0.16s, color 0.16s;
    }
    .admin-popup .popup-social-row a:hover {
      background: #8e24aa;
      color: #fff;
    }
    .login-popup, .signup-popup {
      background: linear-gradient(135deg, #f6e9fd 0%, #e3d4f5 100%);
      border-radius: 18px;
      box-shadow: 0 2px 16px 0 #b621fe33;
      padding: 20px;
      width: 300px;
      max-width: 90vw;
      position: fixed;
      left: 50%;
      top: 150px;
      transform: translateX(-50%);
      z-index: 9998;
      display: none;
      border: 2px solid #d9c2f0;
    }
    .login-popup .popup-title {
      color: #8e24aa;
      font-size: 1.2em;
      text-align: center;
      margin-bottom: 1em;
    }
    .popup-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin: 0;
    }
    .popup-input {
      background: #fff;
      border: 2px solid #d9c2f0;
      border-radius: 8px;
      padding: 0.75em;
      font-size: 1em;
      outline: none;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      color: #444;
      width: 100%;
    }
    .popup-input:focus {
      border-color: #8e24aa;
      box-shadow: 0 0 5px rgba(142, 36, 170, 0.5);
    }
    .login-popup .popup-list-btn {
      background: linear-gradient(90deg, #8e24aa 0%, #b621fe 100%);
      position: relative;
      padding: 0.8em 1.5em;
      font-size: 1.1em;
      margin-top: 1em;
      border-radius: 10px;
      overflow: hidden;
    }
    .login-popup .popup-list-btn::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://www.transparenttextures.com/patterns/wood-pattern.png') repeat;
      opacity: 0.3;
      z-index: 1;
    }
    .login-popup .popup-list-btn span {
      position: relative;
      z-index: 2;
    }
    .popup-switch {
      font-size: 0.9em;
      color: #444;
      margin-top: 1em;
      text-align: center;
    }
    .popup-switch a {
      color: #8e24aa;
      text-decoration: none;
      font-weight: bold;
    }
    .popup-switch a:hover {
      text-decoration: underline;
    }
    .signup-popup {
      background: #f6e9fd !important;
      border-radius: 18px;
      box-shadow: 0 2px 16px 0 #b621fe33;
      padding: 24px 20px 16px 20px;
      width: 300px;
      max-width: 90vw;
      position: fixed;
      left: 50%;
      top: 150px;
      transform: translateX(-50%);
      z-index: 9998;
      display: none;
    }
    .search-bar-wrap {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      margin: 1.2em 0 1.1em 0;
    }
    .search-bar {
      flex: 1 1 80%;
      max-width: 540px;
      background: #282828;
      color: #fff;
      border-radius: 18px 0 0 18px;
      border: none;
      padding: 1.1em 1.3em;
      font-size: 1.23em;
      outline: none;
      box-shadow: 0 2px 10px #0002;
      letter-spacing: 1.3px;
      margin-right: -6px;
      min-width: 220px;
    }
    .search-btn {
      background: linear-gradient(90deg, #c12bff 60%, #ff3c8c 120%);
      color: #fff;
      border: none;
      font-size: 1.17em;
      font-weight: bold;
      border-radius: 0 18px 18px 0;
      padding: 1.1em 2.1em;
      margin-left: 0;
      cursor: pointer;
      transition: background 0.15s;
      box-shadow: 0 2px 10px #b700ff22;
    }
    .search-btn:hover { background: #ff3c8c; }
    .stories-section {
      margin-top: 2em;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 2px 8px #c29be633;
      width: 99vw;
      max-width: 100vw;
      margin-left: auto;
      margin-right: auto;
      padding-bottom: 2em;
    }
    .stories-title {
      font-size: 3em;
      font-family: Impact, 'Arial Black', Arial, sans-serif;
      color: #8a4bb9;
      letter-spacing: 3px;
      margin: 0.7em 0 0.3em 0.7em;
      text-shadow: 2px 2px 8px #ff69b4, 0 2px 0 #ff1493;
      background: linear-gradient(90deg, #ff69b4 0%, #00ff7f 50%, #1e90ff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      border-radius: 16px 16px 0 0;
      padding: 0.1em 0.7em;
      border-bottom: 4px solid #ff69b4;
      width: max-content;
      box-shadow: 0 0 16px #ff69b466;
      position: relative;
      animation: pulseGlow 1.5s infinite alternate;
    }
    @keyframes pulseGlow {
      from { text-shadow: 2px 2px 8px #ff69b4, 0 2px 0 #ff1493; }
      to { text-shadow: 2px 2px 12px #00ff7f, 0 2px 0 #1e90ff; }
    }
    .slideshow-container {
      width: 100vw;
      max-width: 900px;
      margin: 0.7em auto 1.2em auto;
      position: relative;
      border-radius: 18px;
      overflow: hidden;
      background: #eee;
      box-shadow: 0 4px 18px #b39ddb55;
      min-height: 310px;
      min-width: 250px;
    }
    .slide {
      display: none;
      width: 100%;
      height: 100%;
      text-align: left;
      padding: 0;
      box-sizing: border-box;
    }
    .slide.active {
      display: flex;
      align-items: flex-start;
      justify-content: flex-start;
      animation: fadeInSlide .5s;
    }
    @keyframes fadeInSlide {
      from { opacity: 0; transform: translateX(30px);}
      to { opacity: 1; transform: none;}
    }
    .slide-img {
      width: 220px;
      height: 220px;
      border-radius: 18px;
      object-fit: cover;
      margin: 1.1em 2em 1.1em 1.7em;
      box-shadow: 0 2px 12px #c3a2f477;
      flex-shrink: 0;
      background: #d0a8f9;
    }
    .slide-info {
      flex: 1 1 auto;
      padding: 2em 1.5em 1em 0;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }
    .slide-title {
      font-size: 1.5em;
      font-family: 'Lobster', cursive, Arial, Impact, sans-serif;
      color: #6c37e0;
      font-weight: 700;
      margin-bottom: 0.23em;
      line-height: 1.1;
      text-shadow: 0 1px 4px #fff;
    }
    .slide-desc {
      font-size: 1.13em;
      color: #2e2257;
      margin-bottom: 0.7em;
      line-height: 1.35;
      max-width: 400px;
    }
    .slide-link {
      color: #fff;
      background: linear-gradient(90deg,#7a62ef 0%,#e822e6 100%);
      padding: 0.6em 1.1em;
      border-radius: 11px;
      font-size: 1.01em;
      font-family: Impact, Arial Black, Arial, sans-serif;
      font-weight: bold;
      display: inline-flex;
      align-items: center;
      text-decoration: none;
      gap: 0.42em;
      transition: background 0.14s;
      box-shadow: 0 1px 4px #c4c2e7;
      width: max-content;
      border: none;
      outline: none;
      cursor: pointer;
    }
    .slide-link:hover {
      background: linear-gradient(90deg,#e822e6 0%,#7a62ef 100%);
    }
    .slideshow-nav {
      position: absolute;
      width: 100%;
      bottom: 0.4em;
      left: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      align-items: center;
    }
    .slideshow-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.5);
      color: #fff;
      border: none;
      padding: 10px;
      cursor: pointer;
      font-size: 1.2em;
      border-radius: 50%;
    }
    .prev-btn { left: 10px; }
    .next-btn { right: 10px; }
    .slideshow-dot {
      width: 14px;
      height: 14px;
      background: #b29fe9;
      border-radius: 50%;
      display: inline-block;
      cursor: pointer;
      border: 2px solid #e3e3fb;
      transition: background 0.2s;
    }
    .slideshow-dot.active {
      background: #6c37e0;
      border-color: #fff;
    }
    .stories-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 2em;
      justify-content: flex-start;
      background: none;
      padding: 2em 1.2em 1.6em 1.2em;
      max-width: 1400px;
      margin: 0 auto;
    }
    .story-card {
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 2px 24px #b39ddb51;
      overflow: hidden;
      position: relative;
      width: 350px;
      min-height: 290px;
      margin: 0;
      padding: 0;
      border: none;
      display: flex;
      flex-direction: column;
      transition: box-shadow 0.18s, transform 0.18s;
      cursor: pointer;
    }
    .story-card:hover {
      box-shadow: 0 7px 32px #a389d8b0;
      transform: translateY(-4px) scale(1.03);
    }
    .story-img {
      width: 100%;
      height: 170px;
      display: block;
      object-fit: cover;
      background: #000;
      margin-bottom: 0;
    }
    .story-card-content {
      padding: 1em 1.2em 1.1em 1.2em;
      display: flex;
      flex-direction: column;
      flex: 1 1 auto;
    }
    .story-title {
      font-size: 1.25em;
      font-family: "Lobster", cursive, "Segoe UI", Arial, Impact, sans-serif;
      font-weight: bold;
      color: #501a8f;
      margin-bottom: 0.34em;
      margin-top: 0.1em;
      text-shadow: 0 1px 4px #f3e9ff;
      letter-spacing: 0.1px;
      line-height: 1.18;
      max-height: 2.5em;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .story-desc {
      font-size: 1.09em;
      color: #2e2257;
      margin-bottom: 0.72em;
      line-height: 1.23;
      min-height: 2.2em;
      max-height: 3.1em;
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
    }
    .story-links {
      display: flex;
      gap: 1.1em;
      margin-top: 0.52em;
      align-items: center;
      flex-wrap: wrap;
    }
    .story-link {
      color: #fff;
      background: linear-gradient(90deg,#7a62ef 0%,#e822e6 100%);
      padding: 0.6em 1.1em;
      border-radius: 11px;
      font-size: 1.01em;
      font-family: Impact, Arial Black, Arial, sans-serif;
      font-weight: bold;
      display: inline-flex;
      align-items: center;
      text-decoration: none;
      gap: 0.42em;
      transition: background 0.13s;
      box-shadow: 0 1px 4px #c4c2e7;
      width: max-content;
      border: none;
      outline: none;
      cursor: pointer;
    }
    .story-link:hover {
      background: linear-gradient(90deg,#e822e6 0%,#7a62ef 100%);
    }
    @media (max-width: 900px) {
      .slideshow-container { max-width: 99vw; }
      .stories-grid { gap: 1.1em; }
      .story-card { width: 97vw; min-width: 0; }
      .slide-img { margin-right: 0.7em; width: 108px; height: 108px;}
    }
    @media (max-width: 650px) {
      .liamgo-row { flex-direction: column; }
      .today-date { position: static; margin-top: 0.4em; text-align: right; }
      .stories-section { width: 100vw; max-width: 100vw; }
      .stories-title { margin-left: 0.2em; }
      .slideshow-container { max-width: 99vw; }
      .stories-grid { gap: 0.7em; padding: 1em 0.2em 1em 0.2em;}
      .tabs-row { position: static; margin-top: 8px; }
      .homebar-bg { width: 100vw; }
      .story-card { width: 99vw; max-width: 100vw; }
    }
    @media (max-width: 430px) {
      .liam-logo { font-size: 2em; }
      .stories-title { font-size: 2em; }
      .story-img { aspect-ratio: 1/1; }
      .story-card { width: 98vw; }
      .slideshow-container { min-width: 0; }
    }
  </style>
</head>
<body>
  <div class="sticky-header">
    <div class="liamgo-row">
      <div class="liam-logo"><span class="liam">LIAM</span><span class="go">EYES</span></div>
      <div class="today-date" id="today"></div>
    </div>
    <div class="home-mainbar" style="height: 75px; position: relative;">
      <div class="homebar-bg"></div>
      <button class="home-btn-icon" id="homeBtn" aria-label="Return to home"><i class="fa fa-home"></i></button>
      <div class="tabs-row">
        <button class="tab-btn trends" id="trendsBtn" aria-label="View trends">Trends</button>
        <button class="tab-btn gallery" id="galleryBtn" aria-label="View gallery">Gallery</button>
        <div class="menu-btn" id="menuBtn" role="button" aria-label="Open menu" tabindex="0">
          <div class="menu-top">Me</div>
          <div class="menu-bottom">nu</div>
          <div class="triangle"></div>
        </div>
      </div>
    </div>
    <div class="search-bar-wrap" id="mainSearchBar">
      <input class="search-bar" id="searchInput" type="text" placeholder="Search videos or music..." aria-label="Search stories" />
      <button class="search-btn" id="searchBtn" aria-label="Submit search"><i class="fa fa-search"></i> Search</button>
    </div>
    <div class="news-card" id="newsCard">News: New features launching soon.</div>
  </div>
  <div class="stories-section">
    <div class="stories-title">Stories</div>
    <div class="slideshow-container" id="slideshowContainer" role="region" aria-label="Featured stories slideshow"></div>
    <div class="stories-grid" id="storiesList"></div>
  </div>
  <div class="custom-popup" id="customPopup" role="dialog" aria-label="Navigation popup">
    <div class="popup-content" id="popupContent"></div>
  </div>
  <div class="custom-popup admin-popup" id="adminPopup" role="dialog" aria-label="Admin panel">
    <div class="popup-header">
      <span class="popup-logo">LIAM <span style="background:linear-gradient(90deg,#0aafff 0%,#00c86b 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">EYES</span></span>
    </div>
    <div class="popup-search-row">
      <input class="popup-search" placeholder="Search" aria-label="Search admin options" />
    </div>
    <div class="popup-list" style="margin-top:10px;">
      <div class="popup-title" style="color:#8e24aa;">Admin</div>
      <button class="popup-list-btn" style="background: linear-gradient(90deg,#b621fe,#1fd1f9);" aria-label="View dashboard">
        <i class="fa fa-clock"></i> Dashboard
      </button>
      <button class="popup-list-btn" style="background: linear-gradient(90deg,#b621fe,#1fd1f9);" aria-label="Manage users">
        <i class="fa fa-users"></i> Users
      </button>
      <button class="popup-list-btn" style="background: linear-gradient(90deg,#b621fe,#1fd1f9);" aria-label="View settings">
        <i class="fa fa-cog"></i> Settings
      </button>
      <button class="popup-list-btn" style="background: linear-gradient(90deg,#b621fe,#1fd1f9);" aria-label="View logs">
        <i class="fa fa-list"></i> Logs
      </button>
    </div>
  </div>
  <div class="custom-popup login-popup" id="loginPopup" role="dialog" aria-label="Login form">
    <div class="popup-header">
      <span class="popup-logo">LIAM <span style="background:linear-gradient(90deg,#0aafff 0%,#00c86b 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">EYES</span></span>
    </div>
    <div class="popup-title" style="color:#8e24aa;">Log In</div>
    <form id="loginForm" class="popup-form">
      <input type="text" class="popup-input" id="loginUsername" placeholder="Username" required aria-label="Username" />
      <input type="password" class="popup-input" id="loginPassword" placeholder="Password" required aria-label="Password" />
      <button type="submit" class="popup-list-btn" style="background: linear-gradient(90deg,#b621fe,#1fd1f9);" aria-label="Submit login">
        <span><i class="fa fa-sign-in-alt"></i> Log In</span>
      </button>
      <div class="popup-switch">
        <span>Don't have an account? </span>
        <a href="#" id="showSignup">Sign up</a>
      </div>
    </form>
  </div>
  <div class="custom-popup signup-popup" id="signupPopup" role="dialog" aria-label="Signup form">
    <div class="popup-header">
      <span class="popup-logo">LIAM <span style="background:linear-gradient(90deg,#0aafff 0%,#00c86b 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">EYES</span></span>
    </div>
    <div class="popup-title" style="color:#8e24aa;">Sign Up</div>
    <form id="signupForm" class="popup-form">
      <input type="text" class="popup-input" id="signupUsername" placeholder="Username" required aria-label="Username" />
      <input type="email" class="popup-input" id="signupEmail" placeholder="Email" required aria-label="Email" />
      <input type="password" class="popup-input" id="signupPassword" placeholder="Password" required aria-label="Password" />
      <button type="submit" class="popup-list-btn" style="background: linear-gradient(90deg,#b621fe,#1fd1f9);" aria-label="Submit signup">
        <i class="fa fa-user-plus"></i> Sign Up
      </button>
      <div class="popup-switch">
        <span>Already have an account? </span>
        <a href="#" id="showLogin">Log In</a>
      </div>
    </form>
  </div>
  <script>
    document.getElementById('today').innerHTML = `<b>Today</b> <span>${new Date().toLocaleDateString('en-US', {
      weekday: 'short', month: 'short', day: 'numeric', year: 'numeric'
    })}</span>`;

    async function fetchRSSFeed(feedUrl, proxyUrl = '/proxy?url=') {
      try {
        const response = await fetch(proxyUrl + encodeURIComponent(feedUrl));
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        const xmlText = await response.text();
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(xmlText, 'text/xml');
        if (xmlDoc.querySelector('parsererror')) throw new Error('Invalid RSS feed format');
        const items = xmlDoc.querySelectorAll('item');
        const feedItems = Array.from(items).slice(0, 4).map(item => {
          const title = item.querySelector('title')?.textContent || 'No Title';
          let description = item.querySelector('description')?.textContent || 'No Description';
          description = description.replace(/<[^>]+>/g, '').substring(0, 100) + '...';
          const link = item.querySelector('link')?.textContent || '#';
          let image = item.querySelector('enclosure')?.getAttribute('url') ||
                      item.querySelector('media\\:content')?.getAttribute('url') ||
                      'https://via.placeholder.com/220';
          if (image && !image.match(/\.(jpg|jpeg|png|gif)$/i)) {
            image = 'https://via.placeholder.com/220';
          }
          return {
            img: image,
            title: title,
            desc: description,
            link: { href: link, icon: 'fas fa-external-link-alt', text: 'Read More' }
          };
        });
        return feedItems;
      } catch (error) {
        console.error(`Error fetching RSS feed from ${feedUrl}:`, error);
        document.getElementById('newsCard').innerHTML = 'News: Unable to load stories. Please try again later.';
        return [];
      }
    }

    const fallbackStories = [
      {
        img: 'https://via.placeholder.com/220?text=Latest+News',
        title: 'Breaking News Update',
        desc: 'Catch up on the latest global events and headlines.',
        link: { href: '#', icon: 'fas fa-external-link-alt', text: 'Read More' }
      },
      {
        img: 'https://via.placeholder.com/220?text=Music+Trends',
        title: 'New Music Releases',
        desc: 'Discover the hottest music tracks this week.',
        link: { href: '#', icon: 'fas fa-music', text: 'Listen Now' }
      },
      {
        img: 'https://via.placeholder.com/220?text=Tech+Review',
        title: 'Tech Gadget Review',
        desc: 'In-depth review of the latest tech innovations.',
        link: { href: '#', icon: 'fas fa-microchip', text: 'Learn More' }
      },
      {
        img: 'https://via.placeholder.com/220?text=Fashion+Trends',
        title: 'Fashion Highlights',
        desc: 'Explore the latest trends in fashion and style.',
        link: { href: '#', icon: 'fas fa-tshirt', text: 'See More' }
      }
    ];

    async function getSampleTrendingStories() {
      const feedUrls = [
        'https://tuko.co.ke/rss/politics.rss',
        'https://www.pulselive.co.ke/news/politics.rss',
        'https://www.imdb.com/news/rss'
      ];
      let allStories = [];
      for (const feedUrl of feedUrls) {
        const feedItems = await fetchRSSFeed(feedUrl);
        allStories = [...allStories, ...feedItems];
      }
      if (allStories.length === 0) {
        return fallbackStories.slice(0, 8);
      }
      return allStories.sort(() => Math.random() - 0.5).slice(0, 8);
    }

    let trendingStories = [];
    let originalStories = [];
    const slideshowContainer = document.getElementById('slideshowContainer');
    let slideIndex = 0;

    function renderSlideshow() {
      slideshowContainer.innerHTML = `
        ${trendingStories.map((st, idx) => `
          <div class="slide${idx === 0 ? " active" : ""}" role="group" aria-label="Slide ${idx + 1}">
            <img class="slide-img" src="${st.img}" alt="${st.title}" loading="lazy">
            <div class="slide-info">
              <div class="slide-title">${st.title}</div>
              <div class="slide-desc">${st.desc}</div>
              <a class="slide-link" href="${st.link.href}" target="_blank" aria-label="${st.link.text}">
                <i class="${st.link.icon}"></i> ${st.link.text}
              </a>
            </div>
          </div>
        `).join('')}
        <div class="slideshow-nav">
          <button class="slideshow-btn prev-btn" onclick="prevSlide()" aria-label="Previous slide">❮</button>
          ${trendingStories.map((_, idx) => `
            <span class="slideshow-dot${idx === 0 ? " active" : ""}" data-slide="${idx}" role="button" aria-label="Go to slide ${idx + 1}" tabindex="0"></span>
          `).join('')}
          <button class="slideshow-btn next-btn" onclick="nextSlide()" aria-label="Next slide">❯</button>
        </div>
      `;
      Array.from(slideshowContainer.querySelectorAll('.slideshow-dot')).forEach(dot => {
        dot.onclick = function() {
          showSlide(parseInt(this.dataset.slide, 10));
        };
        dot.onkeydown = function(e) {
          if (e.key === 'Enter') {
            showSlide(parseInt(this.dataset.slide, 10));
          }
        };
      });
    }

    function showSlide(n) {
      const slides = slideshowContainer.querySelectorAll('.slide');
      const dots = slideshowContainer.querySelectorAll('.slideshow-dot');
      slides.forEach((slide, idx) => {
        slide.classList.toggle('active', idx === n);
      });
      dots.forEach((dot, idx) => {
        dot.classList.toggle('active', idx === n);
      });
      slideIndex = n;
    }

    function nextSlide() {
      showSlide((slideIndex + 1) % trendingStories.length);
    }

    function prevSlide() {
      showSlide((slideIndex - 1 + trendingStories.length) % trendingStories.length);
    }

    async function initializeStories() {
      trendingStories = await getSampleTrendingStories();
      originalStories = [...trendingStories];
      renderSlideshow();
      renderStories();
      showSlide(0);
    }

    initializeStories();
    setInterval(nextSlide, 6000);

    const storiesList = document.getElementById('storiesList');
    function renderStories() {
      storiesList.innerHTML = '';
      for (let i = 0; i < trendingStories.length; ++i) {
        const st = trendingStories[i];
        const card = document.createElement('div');
        card.className = 'story-card';
        card.setAttribute('role', 'article');
        card.setAttribute('aria-label', st.title);
        card.innerHTML = `
          <img class="story-img" src="${st.img}" alt="${st.title}" loading="lazy">
          <div class="story-card-content">
            <div class="story-title">${st.title || ""}</div>
            <div class="story-desc">${st.desc}</div>
            <div class="story-links">
              <a class="story-link" href="${st.link.href}" target="_blank" aria-label="${st.link.text}"><i class="${st.link.icon}"></i> ${st.link.text}</a>
            </div>
          </div>
        `;
        storiesList.appendChild(card);
      }
    }

    const customPopup = document.getElementById('customPopup');
    const popupContent = document.getElementById('popupContent');
    const menuBtn = document.getElementById('menuBtn');
    const trendsBtn = document.getElementById('trendsBtn');
    const galleryBtn = document.getElementById('galleryBtn');
    const loginPopup = document.getElementById('loginPopup');
    const signupPopup = document.getElementById('signupPopup');
    const adminPopup = document.getElementById('adminPopup');
    const showSignup = document.getElementById('showSignup');
    const showLogin = document.getElementById('showLogin');
    const loginForm = document.getElementById('loginForm');
    const signupForm = document.getElementById('signupForm');

    function showPopup(popupToShow) {
      [customPopup, loginPopup, signupPopup, adminPopup].forEach(popup => {
        if (popup === popupToShow) {
          popup.style.display = popup.classList.contains('custom-popup') ? 'block' : 'flex';
          if (popup === customPopup) popup.classList.add('show');
        } else {
          popup.style.display = 'none';
          if (popup === customPopup) popup.classList.remove('show');
        }
      });
    }

    function debounce(func, wait) {
      let timeout;
      return function(...args) {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, args), wait);
      };
    }

    const menuList = [
      { text: 'Chat', icon: 'fa fa-comment', href: '#' },
      { text: 'Notification', icon: 'fa fa-bell', href: '#' },
      { text: 'Feedback', icon: 'fa fa-star', href: '#' },
      { text: 'Ask Echoe', icon: 'fa fa-microphone', href: '#' },
      { text: 'Install', icon: 'fa fa-download', href: '#' },
      { text: 'Admin', icon: 'fa fa-shield-alt', href: '#' }
    ];
    const trendsList = [
      { text: 'News', icon: 'fa fa-newspaper', href: '#' },
      { text: 'Music', icon: 'fa fa-music', href: '#' },
      { text: 'Movies', icon: 'fa fa-film', href: '#' },
      { text: 'Sports', icon: 'fa fa-basketball-ball', href: '#' },
      { text: 'Fashion', icon: 'fa fa-tshirt', href: '#' },
      { text: 'Technology', icon: 'fa fa-microchip', href: '#' }
    ];
    const galleryList = [
      { text: 'Teens Gallery', icon: 'fa fa-camera', href: '#', galleryType: 'teens' },
      { text: 'GenGallery', icon: 'fa fa-image', href: '#', galleryType: 'gen' }
    ];

    function renderPopup(type) {
      let title = '';
      let list = [];
      if (type === 'menu') {
        title = "Menu";
        list = menuList;
      } else if (type === 'trends') {
        title = "Trends";
        list = trendsList;
      } else if (type === 'gallery') {
        title = "Gallery";
        list = galleryList;
      }
      popupContent.innerHTML = `
        <div class="popup-header">
          <span class="popup-logo">LIAM <span style="background:linear-gradient(90deg,#0aafff 0%,#00c86b 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">EYES</span></span>
        </div>
        <div class="popup-search-row">
          <input class="popup-search" id="popupSearch" placeholder="Search ${type === 'gallery' ? 'galleries' : type.toLowerCase()}..." aria-label="Search ${type.toLowerCase()} options" />
        </div>
        <div class="popup-list" id="popupList">
          <div class="popup-title">${title}</div>
          ${list.map(item => `
            <button class="popup-list-btn" data-text="${item.text}" ${type === 'gallery' ? `onclick="window.open('${item.href}', '_blank')"` : ''} aria-label="${item.text}">
              <i class="${item.icon}"></i> ${item.text}
            </button>
          `).join('')}
        </div>
      `;
      const popupSearch = document.getElementById('popupSearch');
      const popupList = document.getElementById('popupList');
      popupSearch.addEventListener('input', debounce(async function() {
        const val = this.value.trim().toLowerCase();
        if (val.startsWith('http') && (val.includes('rss') || val.includes('feed'))) {
          const feedItems = await fetchRSSFeed(val);
          if (feedItems.length > 0) {
            trendingStories = [...feedItems, ...trendingStories].slice(0, 8);
            originalStories = [...trendingStories];
            renderSlideshow();
            renderStories();
            showSlide(0);
            showPopup(null);
            popupSearch.value = '';
          }
        } else {
          Array.from(popupList.getElementsByClassName('popup-list-btn')).forEach(btn => {
            if (!val || btn.textContent.toLowerCase().includes(val)) {
              btn.style.display = '';
            } else {
              btn.style.display = 'none';
            }
          });
        }
      }, 300));
    }

    menuBtn.onclick = function(e) {
      e.stopPropagation();
      renderPopup('menu');
      showPopup(customPopup);
    };
    menuBtn.onkeydown = function(e) {
      if (e.key === 'Enter') {
        e.stopPropagation();
        renderPopup('menu');
        showPopup(customPopup);
      }
    };

    trendsBtn.onclick = function(e) {
      e.stopPropagation();
      renderPopup('trends');
      showPopup(customPopup);
    };

    galleryBtn.onclick = function(e) {
      e.stopPropagation();
      renderPopup('gallery');
      showPopup(customPopup);
    };

    document.addEventListener('click', function(e) {
      if (
        e.target.classList.contains('popup-list-btn') &&
        e.target.textContent.includes('Admin')
      ) {
        e.stopPropagation();
        showPopup(loginPopup);
      }
    });

    showSignup.onclick = function(e) {
      e.preventDefault();
      showPopup(signupPopup);
    };

    showLogin.onclick = function(e) {
      e.preventDefault();
      showPopup(loginPopup);
    };

    loginForm.onsubmit = async function(e) {
      e.preventDefault();
      const username = document.getElementById('loginUsername').value;
      const password = document.getElementById('loginPassword').value;
      if (!username || !password) {
        alert('Please fill in all fields.');
        return;
      }
      try {
        const response = await fetch('/api/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ username, password })
        });
        if (response.ok) {
          showPopup(adminPopup);
          loginForm.reset();
        } else {
          alert('Login failed. Please check your credentials.');
        }
      } catch (error) {
        console.error('Login error:', error);
        alert('An error occurred. Please try again later.');
      }
    };

    signupForm.onsubmit = async function(e) {
      e.preventDefault();
      const username = document.getElementById('signupUsername').value;
      const email = document.getElementById('signupEmail').value;
      const password = document.getElementById('signupPassword').value;
      if (!username || !email || !password) {
        alert('Please fill in all fields.');
        return;
      }
      try {
        const response = await fetch('/api/signup', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ username, email, password })
        });
        if (response.ok) {
          showPopup(loginPopup);
          signupForm.reset();
        } else {
          alert('Signup failed. Please try again.');
        }
      } catch (error) {
        console.error('Signup error:', error);
        alert('An error occurred. Please try again later.');
      }
    };

    document.addEventListener('mousedown', function(e) {
      if (customPopup.classList.contains('show') && !popupContent.contains(e.target) && 
          ![menuBtn, trendsBtn, galleryBtn].includes(e.target)) {
        showPopup(null);
      }
      if (
        loginPopup.style.display === 'flex' &&
        !loginPopup.contains(e.target) &&
        !signupPopup.contains(e.target) &&
        !(e.target.classList && e.target.classList.contains('popup-list-btn') && e.target.textContent.includes('Admin'))
      ) {
        showPopup(null);
      }
      if (
        signupPopup.style.display === 'flex' &&
        !signupPopup.contains(e.target) &&
        !loginPopup.contains(e.target) &&
        !(e.target.classList && e.target.classList.contains('popup-list-btn') && e.target.textContent.includes('Admin'))
      ) {
        showPopup(null);
      }
      if (
        adminPopup.style.display === 'block' &&
        !adminPopup.contains(e.target) &&
        !(e.target.classList && e.target.classList.contains('popup-list-btn') && e.target.textContent.includes('Admin'))
      ) {
        showPopup(null);
      }
    });

    document.addEventListener('keydown', function(e) {
      if (e.key === "Escape") {
        showPopup(null);
      }
    });

    document.getElementById('homeBtn').onclick = async function() {
      trendingStories = await getSampleTrendingStories();
      originalStories = [...trendingStories];
      renderSlideshow();
      renderStories();
      showSlide(0);
      window.scrollTo({top: 0, behavior: "smooth"});
    };

    document.getElementById('searchBtn').onclick = function() {
      const query = document.getElementById('searchInput').value.trim().toLowerCase();
      if (query) {
        const filteredStories = originalStories.filter(story =>
          story.title.toLowerCase().includes(query) || story.desc.toLowerCase().includes(query)
        );
        trendingStories = filteredStories.length > 0 ? filteredStories : originalStories;
        if (filteredStories.length === 0) {
          document.getElementById('newsCard').innerHTML = 'News: No stories found. Showing all stories.';
        } else {
          document.getElementById('newsCard').innerHTML = 'News: Showing search results.';
        }
        renderSlideshow();
        renderStories();
        showSlide(0);
      } else {
        trendingStories = [...originalStories];
        document.getElementById('newsCard').innerHTML = 'News: New features launching soon.';
        renderSlideshow();
        renderStories();
        showSlide(0);
      }
    };
  </script>
</body>
</html>
